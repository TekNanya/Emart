@model ecommerce.Models.CartViewModel

<div class="container py-5">
    <h1 class="fw-bold mb-4">Корзина</h1>
    <div class="row">
        <div class="col-lg-8">
            @if (Model.Items != null && Model.Items.Any())
            {
                @foreach (var item in Model.Items)
                {
                    <div class="card border-0 shadow-sm mb-3 rounded-4 p-3 product-card">
                        <div class="row align-items-center">
                            <div class="col-md-2">
                                @* FIXED: Style instead of width attribute *@
                                <img src="@item.ImageUrl" class="rounded-3" style="width: 100%; height: auto;" alt="@item.ProductName">
                            </div>
                            <div class="col-md-4">
                                <h6 class="fw-bold mb-0">@item.ProductName</h6>
                                <small class="text-muted">₽@item.Price за ед.</small>
                            </div>
                            <div class="col-md-3 d-flex align-items-center">
                                <form asp-action="UpdateQuantity" method="post" class="d-flex align-items-center bg-light rounded-pill p-1">
                                    <input type="hidden" name="productId" value="@item.ProductId" />
                                    <button type="submit" name="quantity" value="@(item.Quantity - 1)" class="btn btn-sm rounded-circle border-0">－</button>
                                    <span class="mx-3 fw-bold">@item.Quantity</span>
                                    <button type="submit" name="quantity" value="@(item.Quantity + 1)" class="btn btn-sm rounded-circle border-0">＋</button>
                                </form>
                            </div>
                            <div class="col-md-2 text-end">
                                <span class="fw-bold fs-5">₽@((item.Price * item.Quantity).ToString("N0"))</span>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="text-center py-5">
                    <i class="bi bi-cart-x display-1 text-muted"></i>
                    <p class="mt-3 fs-5">Ваша корзина пуста</p>
                    <a asp-controller="Home" asp-action="Shop" class="btn btn-orange rounded-pill px-4" style="background-color: #E67E22; color: white;">В магазин</a>
                </div>
            }
        </div>

        @* Summary Side *@
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm p-4 rounded-4">
                <h5 class="fw-bold mb-4">Сумма заказа</h5>
                <div class="d-flex justify-content-between mb-2">
                    <span class="text-muted">Подытог</span>
                    <span>₽@Model.TotalPrice.ToString("N0")</span>
                </div>
                <hr>
                <div class="d-flex justify-content-between mb-4">
                    <span class="h5 fw-bold">Итого</span>
                    <span class="h5 fw-bold">₽@Model.TotalPrice.ToString("N0")</span>
                </div>
                <a asp-action="Checkout" class="btn btn-orange w-100 rounded-pill py-2 mb-2" style="background-color: #E67E22; color: white;">Оформить заказ</a>
            </div>
        </div>
    </div>
</div>

<style>
    .product-card {
        /* FIXED: Use box-shadow, not shadow */
        transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

        .product-card:hover {
            box-shadow: 0 8px 15px rgba(0,0,0,0.1) !important;
            transform: translateY(-3px);
        }
</style>